{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///build/Piano.js","webpack:///webpack/bootstrap 717bde0777af1265b223","webpack:///external \"tone\"","webpack:///./Salamander.js","webpack:///./Util.js","webpack:///./PianoBase.js","webpack:///./Piano.js","webpack:///./Pedal.js","webpack:///./Notes.js","webpack:///./Harmonics.js","webpack:///./Release.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_0__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","value","_Util","default","getReleasesUrl","midi","getHarmonicsUrl","midiToNote","replace","getNotesUrl","vel","noteToMidi","note","_tone","Frequency","toMidi","toNote","midiToFrequencyRatio","mod","_tone2","intervalToFrequencyRatio","createSource","buffer","BufferSource","randomBetween","low","high","Math","random","undefined","obj","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","writable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","length","descriptor","key","protoProps","staticProps","PianoBase","_AudioNode","vol","arguments","_this","getPrototypeOf","createInsOuts","volume","gainToDb","output","gain","set","dbToGain","AudioNode","_interopRequireDefault","Piano","_Pedal","_Pedal2","_Notes","_Harmonics","_Harmonics2","_Release","_Release2","_Salamander","options","defaults","velocities","range","release","_loaded","_heldNotes","Map","_sustainedNotes","_notes","Notes","connect","_pedal","_harmonics","_release","_this2","url","promises","load","push","Promise","all","then","time","loaded","toSeconds","isDown","down","_this3","up","forEach","t","has","stop","clear","now","velocity","isString","round","start","prevNote","delete","holdTime","prevVel","dampenGain","max","pow","log","param","_this4","pedalUp","keyUp","cb","Buffer","on","_PianoBase2","_PianoBase3","Pedal","_PianoBase","_downTime","Infinity","_currentSound","_buffers","baseUrl","success","Buffers","dir","curve","_squash","_playSample","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","done","err","Array","isArray","_Salamander2","velocitiesMap","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","notes","lowerIndex","findIndex","upperIndex","slicedNotes","slice","_samplers","_activeNotes","source","velPos","roundedVel","diff","_midiToFrequencyRatio","_midiToFrequencyRatio2","ratio","_hasNote","_getNote","playbackRate","prom","harmonics","Harmonics","_samples","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","return","_sampler","triggerAttack","fail","Sampler","Release"],"mappings":"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","file":"./build/Piano.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"tone\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"tone\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Piano\"] = factory(require(\"tone\"));\n\telse\n\t\troot[\"Piano\"] = factory(root[\"tone\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"tone\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"tone\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Piano\"] = factory(require(\"tone\"));\n\telse\n\t\troot[\"Piano\"] = factory(root[\"tone\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 4);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _Util = __webpack_require__(2);\n\nexports.default = {\n\tgetReleasesUrl: function getReleasesUrl(midi) {\n\t\treturn 'rel' + (midi - 20) + '.[mp3|ogg]';\n\t},\n\tgetHarmonicsUrl: function getHarmonicsUrl(midi) {\n\t\treturn 'harmL' + (0, _Util.midiToNote)(midi).replace('#', 's') + '.[mp3|ogg]';\n\t},\n\tgetNotesUrl: function getNotesUrl(midi, vel) {\n\t\treturn (0, _Util.midiToNote)(midi).replace('#', 's') + 'v' + vel + '.[mp3|ogg]';\n\t}\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.randomBetween = exports.midiToFrequencyRatio = exports.createSource = exports.noteToMidi = exports.midiToNote = undefined;\n\nvar _tone = __webpack_require__(0);\n\nvar _tone2 = _interopRequireDefault(_tone);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction noteToMidi(note) {\n\treturn (0, _tone.Frequency)(note).toMidi();\n}\n\nfunction midiToNote(midi) {\n\treturn (0, _tone.Frequency)(midi, 'midi').toNote();\n}\n\nfunction midiToFrequencyRatio(midi) {\n\tvar mod = midi % 3;\n\tif (mod === 1) {\n\t\treturn [midi - 1, _tone2.default.intervalToFrequencyRatio(1)];\n\t} else if (mod === 2) {\n\t\treturn [midi + 1, _tone2.default.intervalToFrequencyRatio(-1)];\n\t} else {\n\t\treturn [midi, 1];\n\t}\n}\n\nfunction createSource(buffer) {\n\treturn new _tone.BufferSource(buffer);\n}\n\nfunction randomBetween(low, high) {\n\treturn Math.random() * (high - low) + low;\n}\n\nexports.midiToNote = midiToNote;\nexports.noteToMidi = noteToMidi;\nexports.createSource = createSource;\nexports.midiToFrequencyRatio = midiToFrequencyRatio;\nexports.randomBetween = randomBetween;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _tone = __webpack_require__(0);\n\nvar _tone2 = _interopRequireDefault(_tone);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PianoBase = function (_AudioNode) {\n\t_inherits(PianoBase, _AudioNode);\n\n\tfunction PianoBase() {\n\t\tvar vol = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n\t\t_classCallCheck(this, PianoBase);\n\n\t\tvar _this = _possibleConstructorReturn(this, (PianoBase.__proto__ || Object.getPrototypeOf(PianoBase)).call(this));\n\n\t\t_this.createInsOuts(0, 1);\n\n\t\t_this.volume = vol;\n\t\treturn _this;\n\t}\n\n\t_createClass(PianoBase, [{\n\t\tkey: 'volume',\n\t\tget: function get() {\n\t\t\treturn _tone2.default.gainToDb(this.output.gain.value);\n\t\t},\n\t\tset: function set(vol) {\n\t\t\tthis.output.gain.value = _tone2.default.dbToGain(vol);\n\t\t}\n\t}]);\n\n\treturn PianoBase;\n}(_tone.AudioNode);\n\nexports.default = PianoBase;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.Piano = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _tone = __webpack_require__(0);\n\nvar _tone2 = _interopRequireDefault(_tone);\n\nvar _Pedal = __webpack_require__(5);\n\nvar _Pedal2 = _interopRequireDefault(_Pedal);\n\nvar _Notes = __webpack_require__(6);\n\nvar _Harmonics = __webpack_require__(7);\n\nvar _Harmonics2 = _interopRequireDefault(_Harmonics);\n\nvar _Release = __webpack_require__(8);\n\nvar _Release2 = _interopRequireDefault(_Release);\n\nvar _Salamander = __webpack_require__(1);\n\nvar _Salamander2 = _interopRequireDefault(_Salamander);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n *  @class Multisampled Grand Piano using [Salamander Piano Samples](https://archive.org/details/SalamanderGrandPianoV3)\n *  @extends {Tone}\n */\nvar Piano = exports.Piano = function (_AudioNode) {\n\t_inherits(Piano, _AudioNode);\n\n\tfunction Piano() {\n\t\t_classCallCheck(this, Piano);\n\n\t\tvar options = _tone2.default.defaults(arguments, [\"range\", \"velocities\", \"release\"], {\n\t\t\tvelocities: 1,\n\t\t\trange: [21, 108],\n\t\t\trelease: true\n\t\t});\n\n\t\tvar _this = _possibleConstructorReturn(this, (Piano.__proto__ || Object.getPrototypeOf(Piano)).call(this));\n\n\t\t_this.createInsOuts(0, 1);\n\n\t\t_this._loaded = false;\n\n\t\t_this._heldNotes = new Map();\n\n\t\t_this._sustainedNotes = new Map();\n\n\t\t_this._notes = new _Notes.Notes(options.range, options.velocities).connect(_this.output);\n\n\t\t_this._pedal = new _Pedal2.default().connect(_this.output);\n\n\t\tif (options.release) {\n\t\t\t_this._harmonics = new _Harmonics2.default(options.range).connect(_this.output);\n\n\t\t\t_this._release = new _Release2.default(options.range).connect(_this.output);\n\t\t}\n\t\treturn _this;\n\t}\n\n\t/**\n  *  Load all the samples\n  *  @param  {String}  baseUrl  The url for the Salamander base folder\n  *  @return  {Promise}\n  */\n\n\n\t_createClass(Piano, [{\n\t\tkey: 'load',\n\t\tvalue: function load() {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'https://tambien.github.io/Piano/Salamander/';\n\n\t\t\tvar promises = [this._notes.load(url), this._pedal.load(url)];\n\t\t\tif (this._harmonics) {\n\t\t\t\tpromises.push(this._harmonics.load(url));\n\t\t\t}\n\t\t\tif (this._release) {\n\t\t\t\tpromises.push(this._release.load(url));\n\t\t\t}\n\t\t\treturn Promise.all(promises).then(function () {\n\t\t\t\t_this2._loaded = true;\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * If all the samples are loaded or not\n   * @readOnly\n   * @type {Boolean}\n   */\n\n\t}, {\n\t\tkey: 'pedalDown',\n\n\n\t\t/**\n   *  Put the pedal down at the given time. Causes subsequent\n   *  notes and currently held notes to sustain.\n   *  @param  {Time}  time  The time the pedal should go down\n   *  @returns {Piano} this\n   */\n\t\tvalue: function pedalDown(time) {\n\t\t\tif (this.loaded) {\n\t\t\t\ttime = this.toSeconds(time);\n\t\t\t\tif (!this._pedal.isDown(time)) {\n\t\t\t\t\tthis._pedal.down(time);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\n   *  Put the pedal up. Dampens sustained notes\n   *  @param  {Time}  time  The time the pedal should go up\n   *  @returns {Piano} this\n   */\n\n\t}, {\n\t\tkey: 'pedalUp',\n\t\tvalue: function pedalUp(time) {\n\t\t\tvar _this3 = this;\n\n\t\t\tif (this.loaded) {\n\t\t\t\ttime = this.toSeconds(time);\n\t\t\t\tif (this._pedal.isDown(time)) {\n\t\t\t\t\tthis._pedal.up(time);\n\t\t\t\t\t// dampen each of the notes\n\t\t\t\t\tthis._sustainedNotes.forEach(function (t, note) {\n\t\t\t\t\t\tif (!_this3._heldNotes.has(note)) {\n\t\t\t\t\t\t\t_this3._notes.stop(note, time);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis._sustainedNotes.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\n   *  Play a note.\n   *  @param  {String|Number}  note      The note to play. If it is a number, it is assumed\n   *                                     to be MIDI\n   *  @param  {NormalRange}  velocity  The velocity to play the note\n   *  @param  {Time}  time      The time of the event\n   *  @return  {Piano}  this\n   */\n\n\t}, {\n\t\tkey: 'keyDown',\n\t\tvalue: function keyDown(note) {\n\t\t\tvar time = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _tone2.default.now();\n\t\t\tvar velocity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.8;\n\n\t\t\tif (this.loaded) {\n\t\t\t\ttime = this.toSeconds(time);\n\n\t\t\t\tif (_tone2.default.isString(note)) {\n\t\t\t\t\tnote = Math.round((0, _tone.Frequency)(note).toMidi());\n\t\t\t\t}\n\n\t\t\t\tif (!this._heldNotes.has(note)) {\n\t\t\t\t\t//record the start time and velocity\n\t\t\t\t\tthis._heldNotes.set(note, { time: time, velocity: velocity });\n\n\t\t\t\t\tthis._notes.start(note, time, velocity);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\n   *  Release a held note.\n   *  @param  {String|Number}  note      The note to stop\n   *  @param  {Time}  time      The time of the event\n   *  @return  {Piano}  this\n   */\n\n\t}, {\n\t\tkey: 'keyUp',\n\t\tvalue: function keyUp(note) {\n\t\t\tvar time = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _tone2.default.now();\n\t\t\tvar velocity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.8;\n\n\t\t\tif (this.loaded) {\n\t\t\t\ttime = this.toSeconds(time);\n\n\t\t\t\tif (_tone2.default.isString(note)) {\n\t\t\t\t\tnote = Math.round((0, _tone.Frequency)(note).toMidi());\n\t\t\t\t}\n\n\t\t\t\tif (this._heldNotes.has(note)) {\n\n\t\t\t\t\tvar prevNote = this._heldNotes.get(note);\n\t\t\t\t\tthis._heldNotes.delete(note);\n\n\t\t\t\t\tif (this._release) {\n\t\t\t\t\t\tthis._release.start(note, time, velocity);\n\t\t\t\t\t}\n\n\t\t\t\t\t//compute the release velocity\n\t\t\t\t\tvar holdTime = time - prevNote.time;\n\t\t\t\t\tvar prevVel = prevNote.velocity;\n\t\t\t\t\tvar dampenGain = 0.5 / Math.max(holdTime, 0.1) + prevVel + velocity;\n\t\t\t\t\tdampenGain = Math.pow(Math.log(Math.max(dampenGain, 1)), 2) / 2;\n\n\t\t\t\t\tif (this._pedal.isDown(time)) {\n\t\t\t\t\t\tif (!this._sustainedNotes.has(note)) {\n\t\t\t\t\t\t\tthis._sustainedNotes.set(note, time);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._notes.stop(note, time, velocity);\n\n\t\t\t\t\t\tif (this._harmonics) {\n\t\t\t\t\t\t\tthis._harmonics.start(note, time, dampenGain);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\n   *  Set the volumes of each of the components\n   *  @param {String} param\n   *  @param {Decibels} vol\n   *  @return {Piano} this\n   *  @example\n   * //either as an string\n   * piano.setVolume('release', -10)\n   */\n\n\t}, {\n\t\tkey: 'setVolume',\n\t\tvalue: function setVolume(param, vol) {\n\t\t\tswitch (param) {\n\t\t\t\tcase 'note':\n\t\t\t\t\tthis._notes.volume = vol;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'pedal':\n\t\t\t\t\tthis._pedal.volume = vol;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'release':\n\t\t\t\t\tif (this._release) {\n\t\t\t\t\t\tthis._release.volume = vol;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'harmonics':\n\t\t\t\t\tif (this._harmonics) {\n\t\t\t\t\t\tthis._harmonics.volume = vol;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t}, {\n\t\tkey: 'stopAll',\n\t\tvalue: function stopAll() {\n\t\t\tvar _this4 = this;\n\n\t\t\tthis.pedalUp();\n\t\t\tthis._heldNotes.forEach(function (value, note) {\n\t\t\t\t_this4.keyUp(note);\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\n   * Callback to invoke with normalized progress\n   * @param  {Function} cb\n   */\n\n\t}, {\n\t\tkey: 'progress',\n\t\tvalue: function progress(cb) {\n\t\t\t_tone.Buffer.on('progress', cb);\n\t\t\treturn this;\n\t\t}\n\t}, {\n\t\tkey: 'loaded',\n\t\tget: function get() {\n\t\t\treturn this._loaded;\n\t\t}\n\t}]);\n\n\treturn Piano;\n}(_tone.AudioNode);\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _PianoBase2 = __webpack_require__(3);\n\nvar _PianoBase3 = _interopRequireDefault(_PianoBase2);\n\nvar _Salamander = __webpack_require__(1);\n\nvar _Salamander2 = _interopRequireDefault(_Salamander);\n\nvar _Util = __webpack_require__(2);\n\nvar _tone = __webpack_require__(0);\n\nvar _tone2 = _interopRequireDefault(_tone);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Pedal = function (_PianoBase) {\n\t_inherits(Pedal, _PianoBase);\n\n\tfunction Pedal() {\n\t\t_classCallCheck(this, Pedal);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Pedal.__proto__ || Object.getPrototypeOf(Pedal)).call(this));\n\n\t\t_this._downTime = Infinity;\n\n\t\t_this._currentSound = null;\n\n\t\t_this._buffers = null;\n\t\treturn _this;\n\t}\n\n\t_createClass(Pedal, [{\n\t\tkey: 'load',\n\t\tvalue: function load(baseUrl) {\n\t\t\tvar _this2 = this;\n\n\t\t\treturn new Promise(function (success) {\n\t\t\t\t_this2._buffers = new _tone.Buffers({\n\t\t\t\t\tup: 'pedalU1.mp3',\n\t\t\t\t\tdown: 'pedalD1.mp3'\n\t\t\t\t}, success, baseUrl);\n\t\t\t});\n\t\t}\n\n\t\t/**\n   *  Squash the current playing sound\n   */\n\n\t}, {\n\t\tkey: '_squash',\n\t\tvalue: function _squash(time) {\n\t\t\tif (this._currentSound) {\n\t\t\t\tthis._currentSound.stop(time + 0.1, 0.1);\n\t\t\t}\n\t\t\tthis._currentSound = null;\n\t\t}\n\t}, {\n\t\tkey: '_playSample',\n\t\tvalue: function _playSample(time, dir) {\n\t\t\tthis._currentSound = (0, _Util.createSource)(this._buffers.get(dir));\n\t\t\tthis._currentSound.curve = 'exponential';\n\t\t\tthis._currentSound.connect(this.output).start(time, (0, _Util.randomBetween)(0, 0.01), undefined, 0.5 * (0, _Util.randomBetween)(0.5, 1), 0.05);\n\t\t}\n\t}, {\n\t\tkey: 'down',\n\t\tvalue: function down(time) {\n\t\t\tthis._squash(time);\n\t\t\tthis._downTime = time;\n\t\t\tthis._playSample(time, 'down');\n\t\t}\n\t}, {\n\t\tkey: 'up',\n\t\tvalue: function up(time) {\n\t\t\tthis._squash(time);\n\t\t\tthis._downTime = Infinity;\n\t\t\tthis._playSample(time, 'up');\n\t\t}\n\t}, {\n\t\tkey: 'isDown',\n\t\tvalue: function isDown(time) {\n\t\t\treturn time > this._downTime;\n\t\t}\n\t}]);\n\n\treturn Pedal;\n}(_PianoBase3.default);\n\nexports.default = Pedal;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.Notes = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _tone = __webpack_require__(0);\n\nvar _tone2 = _interopRequireDefault(_tone);\n\nvar _Salamander = __webpack_require__(1);\n\nvar _Salamander2 = _interopRequireDefault(_Salamander);\n\nvar _PianoBase2 = __webpack_require__(3);\n\nvar _PianoBase3 = _interopRequireDefault(_PianoBase2);\n\nvar _Util = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Maps velocity depths to Salamander velocities\n */\nvar velocitiesMap = {\n\t1: [8],\n\t2: [6, 12],\n\t3: [1, 8, 15],\n\t4: [1, 5, 10, 15],\n\t5: [1, 4, 8, 12, 16],\n\t6: [1, 3, 7, 10, 13, 16],\n\t7: [1, 3, 6, 9, 11, 13, 16],\n\t8: [1, 3, 5, 7, 9, 11, 13, 15],\n\t9: [1, 3, 5, 7, 9, 11, 13, 15, 16],\n\t10: [1, 2, 3, 5, 7, 9, 11, 13, 15, 16],\n\t11: [1, 2, 3, 5, 7, 9, 11, 13, 14, 15, 16],\n\t12: [1, 2, 3, 4, 5, 7, 9, 11, 13, 14, 15, 16],\n\t13: [1, 2, 3, 4, 5, 7, 9, 11, 12, 13, 14, 15, 16],\n\t14: [1, 2, 3, 4, 5, 6, 7, 9, 11, 12, 13, 14, 15, 16],\n\t15: [1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16],\n\t16: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16]\n};\n\nvar notes = [21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60, 63, 66, 69, 72, 75, 78, 81, 84, 87, 90, 93, 96, 99, 102, 105, 108];\n\n/**\n *  Manages all of the hammered string sounds\n */\n\nvar Notes = exports.Notes = function (_PianoBase) {\n\t_inherits(Notes, _PianoBase);\n\n\tfunction Notes() {\n\t\tvar range = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [21, 108];\n\t\tvar velocities = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n\t\t_classCallCheck(this, Notes);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Notes.__proto__ || Object.getPrototypeOf(Notes)).call(this));\n\n\t\tvar lowerIndex = notes.findIndex(function (note) {\n\t\t\treturn note >= range[0];\n\t\t});\n\t\tvar upperIndex = notes.findIndex(function (note) {\n\t\t\treturn note >= range[1];\n\t\t});\n\t\tupperIndex = upperIndex === -1 ? upperIndex = notes.length : upperIndex + 1;\n\n\t\tvar slicedNotes = notes.slice(lowerIndex, upperIndex);\n\n\t\t_this._samplers = velocitiesMap[velocities].slice();\n\n\t\t_this._activeNotes = new Map();\n\n\t\t_this._samplers.forEach(function (vel, i) {\n\t\t\t_this._samplers[i] = {};\n\t\t\tslicedNotes.forEach(function (note) {\n\t\t\t\t_this._samplers[i][note] = _Salamander2.default.getNotesUrl(note, vel);\n\t\t\t});\n\t\t});\n\t\treturn _this;\n\t}\n\n\t_createClass(Notes, [{\n\t\tkey: '_hasNote',\n\t\tvalue: function _hasNote(note, velocity) {\n\t\t\treturn this._samplers.hasOwnProperty(velocity) && this._samplers[velocity].has(note);\n\t\t}\n\t}, {\n\t\tkey: '_getNote',\n\t\tvalue: function _getNote(note, velocity) {\n\t\t\treturn this._samplers[velocity].get(note);\n\t\t}\n\t}, {\n\t\tkey: 'stop',\n\t\tvalue: function stop(note, time, velocity) {\n\t\t\t//stop all of the currently playing note\n\t\t\tif (this._activeNotes.has(note)) {\n\t\t\t\tthis._activeNotes.get(note).forEach(function (source) {\n\t\t\t\t\tvar release = 1;\n\t\t\t\t\tsource.stop(time + release, release);\n\t\t\t\t});\n\t\t\t\tthis._activeNotes.delete(note);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'start',\n\t\tvalue: function start(note, time, velocity) {\n\n\t\t\tvar velPos = velocity * (this._samplers.length - 1);\n\t\t\tvar roundedVel = Math.round(velPos);\n\t\t\tvar diff = roundedVel - velPos;\n\t\t\tvar gain = 1 - diff * 0.5;\n\n\t\t\tif (this._samplers.length === 1) {\n\t\t\t\tgain = velocity;\n\t\t\t}\n\n\t\t\tvar _midiToFrequencyRatio = (0, _Util.midiToFrequencyRatio)(note),\n\t\t\t    _midiToFrequencyRatio2 = _slicedToArray(_midiToFrequencyRatio, 2),\n\t\t\t    midi = _midiToFrequencyRatio2[0],\n\t\t\t    ratio = _midiToFrequencyRatio2[1];\n\n\t\t\tif (this._hasNote(midi, roundedVel)) {\n\t\t\t\tvar source = (0, _Util.createSource)(this._getNote(midi, roundedVel));\n\t\t\t\tsource.playbackRate.value = ratio;\n\t\t\t\tsource.connect(this.output);\n\t\t\t\tsource.curve = 'exponential';\n\t\t\t\tsource.start(time, 0, undefined, gain, 0);\n\n\t\t\t\tif (!this._activeNotes.has(note)) {\n\t\t\t\t\tthis._activeNotes.set(note, []);\n\t\t\t\t}\n\t\t\t\tthis._activeNotes.get(note).push(source);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'load',\n\t\tvalue: function load(baseUrl) {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar promises = [];\n\t\t\tthis._samplers.forEach(function (obj, i) {\n\t\t\t\tvar prom = new Promise(function (success) {\n\t\t\t\t\t_this2._samplers[i] = new _tone.Buffers(obj, success, baseUrl);\n\t\t\t\t});\n\t\t\t\tpromises.push(prom);\n\t\t\t});\n\t\t\treturn Promise.all(promises);\n\t\t}\n\t}]);\n\n\treturn Notes;\n}(_PianoBase3.default);\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Salamander = __webpack_require__(1);\n\nvar _Salamander2 = _interopRequireDefault(_Salamander);\n\nvar _PianoBase2 = __webpack_require__(3);\n\nvar _PianoBase3 = _interopRequireDefault(_PianoBase2);\n\nvar _Util = __webpack_require__(2);\n\nvar _tone = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// the harmonics notes that Salamander has\nvar harmonics = [21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60, 63, 66, 69, 72, 75, 78, 81, 84, 87];\n\nvar Harmonics = function (_PianoBase) {\n\t_inherits(Harmonics, _PianoBase);\n\n\tfunction Harmonics() {\n\t\tvar range = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [21, 108];\n\n\t\t_classCallCheck(this, Harmonics);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Harmonics.__proto__ || Object.getPrototypeOf(Harmonics)).call(this));\n\n\t\tvar lowerIndex = harmonics.findIndex(function (note) {\n\t\t\treturn note >= range[0];\n\t\t});\n\t\tvar upperIndex = harmonics.findIndex(function (note) {\n\t\t\treturn note >= range[1];\n\t\t});\n\t\tupperIndex = upperIndex === -1 ? upperIndex = harmonics.length : upperIndex;\n\n\t\tvar notes = harmonics.slice(lowerIndex, upperIndex);\n\n\t\t_this._samples = {};\n\n\t\tvar _iteratorNormalCompletion = true;\n\t\tvar _didIteratorError = false;\n\t\tvar _iteratorError = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator = notes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\tvar n = _step.value;\n\n\t\t\t\t_this._samples[n] = _Salamander2.default.getHarmonicsUrl(n);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError = true;\n\t\t\t_iteratorError = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t_iterator.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn _this;\n\t}\n\n\t_createClass(Harmonics, [{\n\t\tkey: 'start',\n\t\tvalue: function start(note, time, velocity) {\n\t\t\t//make sure it's a valid range\n\t\t\tif (note >= harmonics[0] && note <= harmonics[harmonics.length - 1]) {\n\t\t\t\tthis._sampler.triggerAttack((0, _Util.midiToNote)(note), time, velocity * (0, _Util.randomBetween)(0.5, 1));\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'load',\n\t\tvalue: function load(baseUrl) {\n\t\t\tvar _this2 = this;\n\n\t\t\treturn new Promise(function (success, fail) {\n\t\t\t\t_this2._sampler = new _tone.Sampler(_this2._samples, success, baseUrl).connect(_this2.output);\n\t\t\t\t_this2._sampler.release = 1;\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn Harmonics;\n}(_PianoBase3.default);\n\nexports.default = Harmonics;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Salamander = __webpack_require__(1);\n\nvar _Salamander2 = _interopRequireDefault(_Salamander);\n\nvar _PianoBase2 = __webpack_require__(3);\n\nvar _PianoBase3 = _interopRequireDefault(_PianoBase2);\n\nvar _Util = __webpack_require__(2);\n\nvar _tone = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Release = function (_PianoBase) {\n\t_inherits(Release, _PianoBase);\n\n\tfunction Release(range) {\n\t\t_classCallCheck(this, Release);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Release.__proto__ || Object.getPrototypeOf(Release)).call(this));\n\n\t\t_this._buffers = {};\n\t\tfor (var i = range[0]; i <= range[1]; i++) {\n\t\t\t_this._buffers[i] = _Salamander2.default.getReleasesUrl(i);\n\t\t}\n\t\treturn _this;\n\t}\n\n\t_createClass(Release, [{\n\t\tkey: 'load',\n\t\tvalue: function load(baseUrl) {\n\t\t\tvar _this2 = this;\n\n\t\t\treturn new Promise(function (success) {\n\t\t\t\t_this2._buffers = new _tone.Buffers(_this2._buffers, success, baseUrl);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'start',\n\t\tvalue: function start(note, time, velocity) {\n\t\t\tif (this._buffers.has(note)) {\n\t\t\t\tvar source = (0, _Util.createSource)(this._buffers.get(note)).connect(this.output);\n\t\t\t\t//randomize the velocity slightly\n\t\t\t\tvelocity *= (0, _Util.randomBetween)(0.5, 1);\n\t\t\t\tsource.start(time, 0, undefined, 0.015 * velocity, 0);\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn Release;\n}(_PianoBase3.default);\n\nexports.default = Release;\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// build/Piano.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 717bde0777af1265b223","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"tone\"\n// module id = 0\n// module chunks = 0","import {noteToMidi, midiToNote} from './Util'\n\nexport default {\n\n\tgetReleasesUrl(midi){\n\t\treturn `rel${midi - 20}.[mp3|ogg]`\n\t},\n\n\tgetHarmonicsUrl(midi){\n\t\treturn `harmL${midiToNote(midi).replace('#', 's')}.[mp3|ogg]`\n\t},\n\n\tgetNotesUrl(midi, vel){\n\t\treturn `${midiToNote(midi).replace('#', 's')}v${vel}.[mp3|ogg]`\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./Salamander.js","import Tone, { Frequency, BufferSource } from 'tone'\n\nfunction noteToMidi(note){\n\treturn Frequency(note).toMidi()\n}\n\nfunction midiToNote(midi){\n\treturn Frequency(midi, 'midi').toNote()\n}\n\nfunction midiToFrequencyRatio(midi){\n\tlet mod = midi % 3\n\tif (mod === 1){\n\t\treturn [midi - 1, Tone.intervalToFrequencyRatio(1)]\n\t} else if (mod === 2){\n\t\treturn [midi + 1, Tone.intervalToFrequencyRatio(-1)]\n\t} else {\n\t\treturn [midi, 1]\n\t}\n}\n\nfunction createSource(buffer){\n\treturn new BufferSource(buffer)\n}\n\nfunction randomBetween(low, high){\n\treturn Math.random() * (high - low) + low\n}\n\nexport {midiToNote, noteToMidi, createSource, midiToFrequencyRatio, randomBetween}\n\n\n\n// WEBPACK FOOTER //\n// ./Util.js","import Tone, {AudioNode} from 'tone'\n\nexport default class PianoBase extends AudioNode {\n\tconstructor(vol = 0) {\n\t\tsuper()\n\t\tthis.createInsOuts(0, 1)\n\n\t\tthis.volume = vol\n\t}\n\tget volume() {\n\t\treturn Tone.gainToDb(this.output.gain.value)\n\t}\n\tset volume(vol) {\n\t\tthis.output.gain.value = Tone.dbToGain(vol)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./PianoBase.js","import Tone, { Gain, Frequency, AudioNode, Buffer} from 'tone'\nimport Pedal from './Pedal'\nimport {Notes} from './Notes'\nimport Harmonics from './Harmonics'\nimport Release from './Release'\nimport Salamander from './Salamander'\n\n/**\n *  @class Multisampled Grand Piano using [Salamander Piano Samples](https://archive.org/details/SalamanderGrandPianoV3)\n *  @extends {Tone}\n */\nexport class Piano extends AudioNode {\n\n\tconstructor(){\n\n\t\tconst options = Tone.defaults(arguments, [\"range\", \"velocities\", \"release\"], {\n\t\t\tvelocities : 1,\n\t\t\trange : [21, 108],\n\t\t\trelease : true\n\t\t});\n\n\t\tsuper()\n\t\tthis.createInsOuts(0, 1)\n\n\t\tthis._loaded = false\n\n\t\tthis._heldNotes = new Map()\n\n\t\tthis._sustainedNotes = new Map()\n\n\t\tthis._notes = new Notes(options.range, options.velocities).connect(this.output)\n\n\t\tthis._pedal = new Pedal().connect(this.output)\n\n\t\tif (options.release){\n\t\t\tthis._harmonics = new Harmonics(options.range).connect(this.output)\n\n\t\t\tthis._release = new Release(options.range).connect(this.output)\n\t\t}\n\t}\n\n\t/**\n\t *  Load all the samples\n\t *  @param  {String}  baseUrl  The url for the Salamander base folder\n\t *  @return  {Promise}\n\t */\n\tload(url='https://tambien.github.io/Piano/Salamander/'){\n\t\tconst promises = [this._notes.load(url), this._pedal.load(url)]\n\t\tif (this._harmonics){\n\t\t\tpromises.push(this._harmonics.load(url))\n\t\t}\n\t\tif (this._release){\n\t\t\tpromises.push(this._release.load(url))\n\t\t}\n\t\treturn Promise.all(promises).then(() => {\n\t\t\tthis._loaded = true\n\t\t})\n\t}\n\n\t/**\n\t * If all the samples are loaded or not\n\t * @readOnly\n\t * @type {Boolean}\n\t */\n\tget loaded(){\n\t\treturn this._loaded\n\t}\n\n\t/**\n\t *  Put the pedal down at the given time. Causes subsequent\n\t *  notes and currently held notes to sustain.\n\t *  @param  {Time}  time  The time the pedal should go down\n\t *  @returns {Piano} this\n\t */\n\tpedalDown(time){\n\t\tif (this.loaded){\n\t\t\ttime = this.toSeconds(time)\n\t\t\tif (!this._pedal.isDown(time)){\n\t\t\t\tthis._pedal.down(time)\n\t\t\t}\n\t\t}\n\t\treturn this\n\t}\n\n\t/**\n\t *  Put the pedal up. Dampens sustained notes\n\t *  @param  {Time}  time  The time the pedal should go up\n\t *  @returns {Piano} this\n\t */\n\tpedalUp(time){\n\t\tif (this.loaded){\n\t\t\ttime = this.toSeconds(time)\n\t\t\tif (this._pedal.isDown(time)){\n\t\t\t\tthis._pedal.up(time)\n\t\t\t\t// dampen each of the notes\n\t\t\t\tthis._sustainedNotes.forEach((t, note) => {\n\t\t\t\t\tif (!this._heldNotes.has(note)){\n\t\t\t\t\t\tthis._notes.stop(note, time)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tthis._sustainedNotes.clear()\n\t\t\t}\n\t\t}\n\t\treturn this\n\t}\n\n\t/**\n\t *  Play a note.\n\t *  @param  {String|Number}  note      The note to play. If it is a number, it is assumed\n\t *                                     to be MIDI\n\t *  @param  {NormalRange}  velocity  The velocity to play the note\n\t *  @param  {Time}  time      The time of the event\n\t *  @return  {Piano}  this\n\t */\n\tkeyDown(note, time=Tone.now(), velocity=0.8){\n\t\tif (this.loaded){\n\t\t\ttime = this.toSeconds(time)\n\n\t\t\tif (Tone.isString(note)){\n\t\t\t\tnote = Math.round(Frequency(note).toMidi())\n\t\t\t}\n\n\t\t\tif (!this._heldNotes.has(note)){\n\t\t\t\t//record the start time and velocity\n\t\t\t\tthis._heldNotes.set(note, {time, velocity})\n\n\t\t\t\tthis._notes.start(note, time, velocity)\n\t\t\t}\n\t\t}\n\t\treturn this\n\t}\n\n\t/**\n\t *  Release a held note.\n\t *  @param  {String|Number}  note      The note to stop\n\t *  @param  {Time}  time      The time of the event\n\t *  @return  {Piano}  this\n\t */\n\tkeyUp(note, time=Tone.now(), velocity=0.8){\n\t\tif (this.loaded){\n\t\t\ttime = this.toSeconds(time)\n\n\t\t\tif (Tone.isString(note)){\n\t\t\t\tnote = Math.round(Frequency(note).toMidi())\n\t\t\t}\n\n\t\t\tif (this._heldNotes.has(note)){\n\n\t\t\t\tconst prevNote = this._heldNotes.get(note)\n\t\t\t\tthis._heldNotes.delete(note)\n\n\t\t\t\tif (this._release){\n\t\t\t\t\tthis._release.start(note, time, velocity)\n\t\t\t\t}\n\n\t\t\t\t//compute the release velocity\n\t\t\t\tconst holdTime = time - prevNote.time\n\t\t\t\tconst prevVel = prevNote.velocity\n\t\t\t\tlet dampenGain = (0.5/Math.max(holdTime, 0.1)) + prevVel + velocity\n\t\t\t\tdampenGain = Math.pow(Math.log(Math.max(dampenGain, 1)), 2) / 2\n\n\t\t\t\tif (this._pedal.isDown(time)){\n\t\t\t\t\tif (!this._sustainedNotes.has(note)){\n\t\t\t\t\t\tthis._sustainedNotes.set(note, time)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis._notes.stop(note, time, velocity)\n\n\t\t\t\t\tif (this._harmonics){\n\t\t\t\t\t\tthis._harmonics.start(note, time, dampenGain)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this\n\t}\n\n\t/**\n\t *  Set the volumes of each of the components\n\t *  @param {String} param\n\t *  @param {Decibels} vol\n\t *  @return {Piano} this\n\t *  @example\n\t * //either as an string\n\t * piano.setVolume('release', -10)\n\t */\n\tsetVolume(param, vol){\n\t\tswitch(param){\n\t\t\tcase 'note':\n\t\t\t\tthis._notes.volume = vol\n\t\t\t\tbreak\n\t\t\tcase 'pedal':\n\t\t\t\tthis._pedal.volume = vol\n\t\t\t\tbreak\n\t\t\tcase 'release':\n\t\t\t\tif (this._release){\n\t\t\t\t\tthis._release.volume = vol\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\tcase 'harmonics':\n\t\t\t\tif (this._harmonics){\n\t\t\t\t\tthis._harmonics.volume = vol\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t}\n\t\treturn this\n\t}\n\n\tstopAll(){\n\t\tthis.pedalUp()\n\t\tthis._heldNotes.forEach((value, note) => {\n\t\t\tthis.keyUp(note)\n\t\t})\n\t\treturn this\n\t}\n\n\t/**\n\t * Callback to invoke with normalized progress\n\t * @param  {Function} cb\n\t */\n\tprogress(cb){\n\t\tBuffer.on('progress', cb)\n\t\treturn this\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./Piano.js","import PianoBase from './PianoBase'\nimport Salamander from './Salamander'\nimport {createSource, randomBetween} from './Util'\nimport Tone, {Buffers} from 'tone'\n\nexport default class Pedal extends PianoBase {\n\tconstructor(){\n\t\tsuper()\n\n\t\tthis._downTime = Infinity\n\n\t\tthis._currentSound = null\n\n\t\tthis._buffers = null\n\t}\n\n\tload(baseUrl){\n\t\treturn new Promise((success) => {\n\t\t\tthis._buffers = new Buffers({\n\t\t\t\tup : 'pedalU1.mp3',\n\t\t\t\tdown : 'pedalD1.mp3'\n\t\t\t}, success, baseUrl)\n\t\t})\n\t}\n\n\t/**\n\t *  Squash the current playing sound\n\t */\n\t_squash(time){\n\t\tif (this._currentSound){\n\t\t\tthis._currentSound.stop(time+0.1, 0.1)\n\t\t}\n\t\tthis._currentSound = null\n\t}\n\n\t_playSample(time, dir){\n\t\tthis._currentSound = createSource(this._buffers.get(dir))\n\t\tthis._currentSound.curve = 'exponential'\n\t\tthis._currentSound.connect(this.output).start(time, randomBetween(0, 0.01), undefined, 0.5 * randomBetween(0.5, 1), 0.05)\n\t}\n\n\tdown(time){\n\t\tthis._squash(time)\n\t\tthis._downTime = time\n\t\tthis._playSample(time, 'down')\n\t}\n\n\tup(time){\n\t\tthis._squash(time)\n\t\tthis._downTime = Infinity\n\t\tthis._playSample(time, 'up')\n\t}\n\n\tisDown(time){\n\t\treturn time > this._downTime\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./Pedal.js","import Tone, { Buffers , MultiSampler} from 'tone'\nimport Salamander from './Salamander'\nimport PianoBase from './PianoBase'\nimport {noteToMidi, createSource, midiToNote, midiToFrequencyRatio} from './Util'\n\n/**\n * Maps velocity depths to Salamander velocities\n */\nconst velocitiesMap = {\n\t1  : [8],\n\t2  : [6, 12],\n\t3  : [1, 8, 15],\n\t4  : [1, 5, 10, 15],\n\t5  : [1, 4, 8, 12, 16],\n\t6  : [1, 3, 7, 10, 13, 16],\n\t7  : [1, 3, 6, 9, 11, 13, 16],\n\t8  : [1, 3, 5, 7, 9, 11, 13, 15],\n\t9  : [1, 3, 5, 7, 9, 11, 13, 15, 16],\n\t10 : [1, 2, 3, 5, 7, 9, 11, 13, 15, 16],\n\t11 : [1, 2, 3, 5, 7, 9, 11, 13, 14, 15, 16],\n\t12 : [1, 2, 3, 4, 5, 7, 9, 11, 13, 14, 15, 16],\n\t13 : [1, 2, 3, 4, 5, 7, 9, 11, 12, 13, 14, 15, 16],\n\t14 : [1, 2, 3, 4, 5, 6, 7, 9, 11, 12, 13, 14, 15, 16],\n\t15 : [1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16],\n\t16 : [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16],\n}\n\nconst notes = [21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60, 63, 66, 69, 72, 75, 78, 81, 84, 87, 90, 93, 96, 99, 102, 105, 108]\n\n/**\n *  Manages all of the hammered string sounds\n */\nexport class Notes extends PianoBase {\n\n\tconstructor(range=[21, 108], velocities=1){\n\t\tsuper()\n\n\t\tconst lowerIndex = notes.findIndex((note) => note >= range[0])\n\t\tlet upperIndex = notes.findIndex((note) => note >= range[1])\n\t\tupperIndex = upperIndex === -1 ? upperIndex = notes.length : upperIndex + 1\n\n\t\tconst slicedNotes = notes.slice(lowerIndex, upperIndex)\n\n\t\tthis._samplers = velocitiesMap[velocities].slice()\n\n\t\tthis._activeNotes = new Map()\n\n\t\tthis._samplers.forEach((vel, i) => {\n\t\t\tthis._samplers[i] = {}\n\t\t\tslicedNotes.forEach((note) => {\n\t\t\t\tthis._samplers[i][note] = Salamander.getNotesUrl(note, vel)\n\t\t\t})\n\t\t})\n\t}\n\n\t_hasNote(note, velocity){\n\t\treturn this._samplers.hasOwnProperty(velocity) && this._samplers[velocity].has(note)\n\t}\n\n\t_getNote(note, velocity){\n\t\treturn this._samplers[velocity].get(note)\n\t}\n\n\tstop(note, time, velocity){\n\t\t//stop all of the currently playing note\n\t\tif (this._activeNotes.has(note)){\n\t\t\tthis._activeNotes.get(note).forEach(source => {\n\t\t\t\tconst release = 1\n\t\t\t\tsource.stop(time + release, release)\n\t\t\t})\n\t\t\tthis._activeNotes.delete(note)\n\t\t}\n\t}\n\n\tstart(note, time, velocity){\n\n\t\tconst velPos = velocity * (this._samplers.length - 1)\n\t\tconst roundedVel = Math.round(velPos)\n\t\tconst diff = roundedVel - velPos\n\t\tlet gain = 1 - diff * 0.5\n\n\t\tif (this._samplers.length === 1){\n\t\t\tgain = velocity\n\t\t}\n\n\t\tlet [midi, ratio] = midiToFrequencyRatio(note)\n\n\t\tif (this._hasNote(midi, roundedVel)){\n\t\t\tconst source = createSource(this._getNote(midi, roundedVel))\n\t\t\tsource.playbackRate.value = ratio\n\t\t\tsource.connect(this.output)\n\t\t\tsource.curve = 'exponential'\n\t\t\tsource.start(time, 0, undefined, gain, 0)\n\n\t\t\tif (!this._activeNotes.has(note)){\n\t\t\t\tthis._activeNotes.set(note, [])\n\t\t\t}\n\t\t\tthis._activeNotes.get(note).push(source)\n\t\t}\n\t}\n\n\tload(baseUrl){\n\t\tconst promises = []\n\t\tthis._samplers.forEach((obj, i) => {\n\t\t\tlet prom = new Promise((success) => {\n\t\t\t\tthis._samplers[i] = new Buffers(obj, success, baseUrl)\n\t\t\t})\n\t\t\tpromises.push(prom)\n\t\t})\n\t\treturn Promise.all(promises)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./Notes.js","import Salamander from './Salamander'\nimport PianoBase from './PianoBase'\nimport {noteToMidi, createSource, midiToFrequencyRatio, midiToNote, randomBetween} from './Util'\nimport { Buffers , Sampler, Frequency} from 'tone'\n\n// the harmonics notes that Salamander has\nconst harmonics = [21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60, 63, 66, 69, 72, 75, 78, 81, 84, 87]\n\nexport default class Harmonics extends PianoBase {\n\n\tconstructor(range=[21, 108]){\n\t\tsuper()\n\n\t\tconst lowerIndex = harmonics.findIndex((note) => note >= range[0])\n\t\tlet upperIndex = harmonics.findIndex((note) => note >= range[1])\n\t\tupperIndex = upperIndex === -1 ? upperIndex = harmonics.length : upperIndex\n\n\t\tconst notes = harmonics.slice(lowerIndex, upperIndex)\n\n\t\tthis._samples = {}\n\n\t\tfor (let n of notes){\n\t\t\tthis._samples[n] = Salamander.getHarmonicsUrl(n)\n\t\t}\n\t}\n\n\tstart(note, time, velocity){\n\t\t//make sure it's a valid range\n\t\tif (note >= harmonics[0] && note <= harmonics[harmonics.length-1]){\n\t\t\tthis._sampler.triggerAttack(midiToNote(note), time, velocity * randomBetween(0.5, 1))\n\t\t}\n\t}\n\n\tload(baseUrl){\n\t\treturn new Promise((success, fail) => {\n\t\t\tthis._sampler = new Sampler(this._samples, success, baseUrl).connect(this.output)\n\t\t\tthis._sampler.release = 1\n\t\t})\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./Harmonics.js","import Salamander from './Salamander'\nimport PianoBase from './PianoBase'\nimport {createSource, randomBetween} from './Util'\nimport { Buffers } from 'tone'\n\nexport default class Release extends PianoBase {\n\n\tconstructor(range){\n\t\tsuper()\n\n\t\tthis._buffers = {}\n\t\tfor (let i = range[0]; i <= range[1]; i++){\n\t\t\tthis._buffers[i] = Salamander.getReleasesUrl(i)\n\t\t}\n\t}\n\n\tload(baseUrl){\n\t\treturn new Promise((success) => {\n\t\t\tthis._buffers = new Buffers(this._buffers, success, baseUrl)\n\t\t})\n\t}\n\n\tstart(note, time, velocity){\n\t\tif (this._buffers.has(note)){\n\t\t\tlet source = createSource(this._buffers.get(note)).connect(this.output)\n\t\t\t//randomize the velocity slightly\n\t\t\tvelocity *= randomBetween(0.5, 1)\n\t\t\tsource.start(time, 0, undefined, 0.015 * velocity, 0)\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./Release.js"],"sourceRoot":""}